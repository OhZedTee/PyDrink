##Overview##
This is a Drink Manager App that monitors the drinks you have and helps you find
cocktails you can make with it.

For this assignment all data (except NonAlcoholic Mock data) is coming from the LCBO API running on the cis4450.socs.uoguelph.ca server.
Please make sure you are connected to the school VPN before running this application.

Non Alcoholic Beverages are mocked in data/mock/nonalcoholic.csv. Feel free to add your own to the mock data to use
in making drinks. These Non Alcoholic drinks will appear straight in your fridge (not in the inventory) and can not
be removed permanently without removing them from nonalcoholic.csv. You can remove them for a session, but the next
time you open the app, they will be there.

The inventory is where the API is connected and allows you to view the LCBO products. You can search based off any parameter and can
add multiple parameters together:
i.e. "Yellow", "Apple", "Vodka",
     "Red Wine", etc...

To add a drink from your inventory to your fridge, you need to select a drink with a left click and then
right click the drink to add it to your cart. At that point pressing the Add To Fridge Button will add
any drink in your cart to your Fridge.

The same UI principles are in effect in the Fridge Tab, Except no need for an Add To Glass Button. 
Select the drinks you might want to make a cocktail from and they will appear in the glass tab.

In the Glass tab, you can see what drinks are selected (however you cant click on them) and the cocktails you
can make. Left clicking on the cocktails will show you how to make each cocktail.

Note* Due to the nature of the data I am working with there is a chance that the cocktails available are not accurate
to the types of drinks you have added. I have tried to mitigate this as much as possible but there are limitations to what I can do
with the bad data I have managed to find for free.

TLDR:
Inventory Tab:
Left click on a drink - shows description and selects drink
Right click on a drink that is selected - Adds drink to cart
Pressing 'Add To Fridge' button - Adds all drinks
in the cart to the fridge tab.

Glass Tab:
Shows all drinks you've selected in the fridge tab
Single click on any cocktail - shows whats required for
making the cocktail chosen

HERE ARE SOME COCKTAILS TO TRY MAKING:

Gin and Tonic:
Dillion's Unfiltered (Gin)
Tonic

Manhattan:
Martini's Vermouth (Sweet Vermouth)
Buffalo Trace (Bourbon Whiskey)

Try something else out, maybe you'll find
other cocktails you never knew existed!



##User Stories:##
1. As a user I want to be able to get updated specific information from the LCBO store
   so that I can make informed decisions about what I want to drink
2. As a user I want to be able to read the recipe in multiple languages so that I can
   can translate it to friends and family who don't speak english
3. As a user I want to be able to hear the recipe spoken to me so that as a seeing 
   impaired individual I can hear the recipe instead of reading small text


All of the user stories have been implemented in the application.



##Requirements:##
  Python 3.7.2 (not negotiable, modules required from 3.7, so 3.5 is not enough unless you are able to get around some module dependencies)
    Check which version you have
    with the following command 'python --version' or 'python3 --version' if you don't have it
    please install: https://www.python.org/downloads/release/python-372/
  tkinter
  PyYaml
  ABC (Abstract Base Class, requires Python 3.x, if the program complains about this, its because you aren't using Python 3.x)
  PyGame
  BeautifulSoup4
  lxml
  

##Instructions for Running:##

Which ever --version command gives you 3.7 ('python' or 'python3', please use that
command for the rest of the setup instructions)

Linux
  1. On linux, installing python-tk package or python3-tk package should do the trick
    (sudo apt-get install python3-tk) 
  2. Follow the following tutorial if the above fails: https://tkdocs.com/tutorial/install.html
  3. Run command python -m pip install --upgrade pip setuptools wheel (to update wheel projects)
  4. Run command sudo pip install pyyaml, if this doesnt work try sudo pip3 install pyyaml. If that doesnt work, I'm sure google has another way.
  5. Do the same as 4 for the following packages:
     - pygame
     - requests
     - beautifulsoup4
     - lxml
  6. Run command on terminal: make run 
        this will attempt both python and python3 command, so ignore command not found error if it appears for one or the other
  7. If make doesnt work, type python3 || python PyDrink.py
  8. This application uses an external API running on cis4450.socs.uoguelph.ca server. If it doesnt work for some
        reason (If the inventory page is empty), make sure you are connected with Cisco AnyConnect, if it still
        doesn't work, please see README in lcbo-api folder to set up the API locally.
        Once the API is running locally. Go to data/ folder and edit
        config.yml: host: localhost (or 127.0.0.1) and port:3000
        
Mac
  1. On MacOSX Python 3.1+ should include tkinter as part of the distribution (cannot vouch for that though). If it doesnt, installing latest distribution of Python should install it.
  2. Follow the following tutorial if the above fails: https://tkdocs.com/tutorial/install.html
  3. Run command python -m pip install --upgrade pip setuptools wheel (to update wheel projects)
  4. Run command sudo pip install pyyaml, if this doesnt work try sudo pip3 install pyyaml. If that doesnt work, I'm sure google has another way.
  5. Do the same as 4 for the following packages:
     - pygame
     - requests
     - beautifulsoup4
     - lxml
  6. Run command on terminal: make run 
        this will attempt both python and python3 command, so ignore command not found error if it appears for one or the other
  7. If make doesnt work, type python3 || python PyDrink.py
  8. This application uses an external API running on cis4450.socs.uoguelph.ca server. If it doesnt work for some
        reason (If the inventory page is empty), make sure you are connected with Cisco AnyConnect, if it still
        doesn't work, please see README in lcbo-api folder to set up the API locally.
        Once the API is running locally. Go to data/ folder and edit
        config.yml: host: localhost (or 127.0.0.1) and port:3000
 
Windows
  1. This software requires TKinter. If the program doesn't start correctly
        with below step please visit https://www.activestate.com/products/activetcl/downloads/
        to install ActiveTcl which adds Tkinter to Python distribution (make sure you install 8.5+,
        not 8.4 or lower)
  2. Follow the following tutorial if the above fails: https://tkdocs.com/tutorial/install.html
  3. Run command python -m pip install --upgrade pip setuptools wheel (to update wheel projects)
  4. Run command pip install pyyaml, if this doesnt work try pip3 install pyyaml. If that doesnt work, I'm sure google has another way.
  5. Do the same as 4 for the following packages:
     - pygame
     - requests
     - beautifulsoup4
     - lxml
  6. Run command on terminal: make run 
        this will attempt both python and python3 command, so ignore command not found error if it appears for one or the other
  7. If make doesnt exist install MinGW: https://osdn.net/projects/mingw/downloads/68260/mingw-get-setup.exe/
        The above step installs the manager, then select mingw32-make-bin package and install it. Go to the install directory and copy the
        file mingw32-make.exe calling it make.exe. Then add the directory to make to your path variable (system environment variables)
        Restart your terminal and you should now be able to run command 'make run'
  8. If make still doesnt work, type python3 || python PyDrink.py
  9. This application uses an external API running on cis4450.socs.uoguelph.ca server. If it doesnt work for some
        reason (If the inventory page is empty), make sure you are connected with Cisco AnyConnect, if it still
        doesn't work, please see README in lcbo-api folder to set up the API locally.
        Once the API is running locally. Go to data/ folder and edit
        config.yml: host: localhost (or 127.0.0.1) and port:3000


##Explanation of All Classes##
    Models:
        src/DrinkStorage: List of Drinks, required methods for child classes
        src/Fridge: Implementation of DrinkStorage required methods
        src/Glass: Implementation of DrinkStorage required methods
        src/Inventory: Implementation of DrinkStorage required methods + Parses API data + Parses mock data
        src/Drink: Base drink class which all drinks inherit from. Attributes: ID, Name, Cost, Description
        src/Alcoholic: Child class of Drink. Attributes: APV (alcohol per volume), Package, Category
        src/NonAlcoholic: Child class of drink. Attributes: Carbonation (True, False), Sugar Content, Package, Caffeine Content
        src/Translate: Microsoft Translate Text SOAP API handler. Attributes: languages, key (Authorization), token, Speech Number (Iterating through audio files)
    View: 
        PyDrink: GUI class
    Controller:
        ui/PyDrinkController: GUI event handlers + Maintains models
                        *There is one controller that handles all the models
                         since some of the event handlers require multiple models
                         in order to function properly
        src/Encoder: Encoder for the JSON format to use public variables instead of private
        ui/ROText: Custom GUI Textbox that disables common functionality to work as a READ-ONLY Text box
                (i.e. Disabled: paste, editing, deleting, Undoing, Redoing, etc.)
        ui/ScrolledTreeView: Custom GUI TreeView (the tables you see in the UI) that are scrollable
                to allow for multipaged display with a convenient scroll bar
        ui/SearchBox: Custom GUI Searchbox taken from Tkinter's public recipes and adapted for 
                the purposes of this app.
        ui/GUI: Custom GUI Model that maintains the Tkinter view and controller.



##Known Limitations##
- Due to the sheer size of the inventory data and the way the restful API works, I only get 20 items per request.
  So as to not bog down the application, I have made every inventory page distinct. What does this mean?
  If you select a drink in the inventory page, and shuffle through the pages, the dictionary that holds the
  drink objects is cleared and new drinks are added to it. Meaning the data as to which drinks you selected don't
  persist. A way around this is to add drinks to your fridge from the inventory intermitently before changing pages
  (or making queries).
- NonAlcoholic Beverages are difficult to create without user input. Due to the complexity of this Application, I did
  not have time to include more forms for user input. Please use the mock data file found at "data/mock/nonalcoholic.csv".
  You can add or remove whatever you like in that file, however because I am using mock data I did not want to
  be able to delete Non Alcoholic beverages through the application with mock data due to the effort required to add
  and remove non alcoholic beverages. Thus, when removing a non alcoholic drink from the fridge in the app, it will
  only remove the drink from the current session. When reopening the application, the original mock data will show up
  again. Simple to fix, but for testing and usability purposes I did not.
- Microsoft Text Translator API is limited in the number of "character conversions" per month. So please use the functionality
  sparingly. This API is meant to be a proof of concept, so keep it to small number of translations and text-to-speech calls.
  
  
------------------------------------------------------------------------------------------------------------------------
    1   |   General OO
        |
        |   Controller + Model + View Design
        |
        |   - ui/PyDrinkController.py                            - One controller that handles all the models was 
        |                                                          decided in my design since my controller needs
        |                                                          multiple Models to handle events properly. If
        |                                                          I split up my controllers, I would have to add 
        |                                                          coupling between controllers and split handling
        |                                                          an event in multiple controllers which is more 
        |                                                          than having the 3 models handled in the one controller.
        |                                                         
        |
        |   Encapsulation, Constructors, Accessors, Mutators, Instance Variables
        |
        |   - src/Inventory.py            - Lines 12 - 84       - Inventory Class added that shows encapsulation
        |                                                         by having its own private variables and 
        |                                                         mutators/accessors, and inheritance since it
        |                                                         inherits from my DrinkStorage abstract class.
        |    
        |    - src/Drink.py                 - Lines 8 - 69      - Encapsulation is everywhere in my program, but
        |                                                         here is another example that shows were I use
        |                                                         private instance variables, constructors, and 
        |                                                         mutators/accessors.
        |
        |
        |    Code Reuse
        |
        |    - ui/PyDrinkController.py      - Lines 309 - 325   - Method insert_manager_tree() shows code reuse, 
        |                                                         since multiple events call this method to handle
        |                                                         similar tasks with different models. This allows
        |                                                         me to load data into tree views with different models.
        |
        |
        |    Polymorphism
        |
        |    - src/Inventory.py            - Line 135 (Alcoholic)  - I am currently maintaining a dictionary of Drinks
        |    - src/Fridge.py               - Lines 65-67             in the DrinkStorage class, however I am adding Alcoholic and NonAlcoholic
        |                                                            drinks to it. This is where polymorphism plays a part in my project.
        |
        |
        |   Class Hierarchies and Method Overriding
        |
        |   - src/Drink.py                - Line 122            - src/Alcoholic.py and src/NonAlcoholic.py depend
        |   - src/Alcoholic.py            - Line 55               on src/Drinks.py and override the __str__  
        |   - src/NonAlcoholic.py         - Line 66               method to print according to their attributes.
        |                                                         
        |   - src/DrinkStorage.py              - Line 23             - Similar to the __str__ method above, the parse method
        |   - src/Fridge.py               - Line 38               in src/DrinkStorage.py is overriden to accommodate the
        |   - src/Glass.py                - Line 28               differences between src/Fridge.py, src/Glass.py and
        |   - src/Inventory.py            - Line 97               src/Inventory.py
        |
        |
        |    Class Relationships: Abstract DrinkStorage Class -> Fridge, Glass, and Inventory classes, Drink class -> NonAlcoholic and Alcoholic classes
        |
        |   - src/DrinkStorage.py              - Line 7              - This is an abstract class that contains
        |                                                         behaviours and attributes common to 
        |                                                         src/Inventory.py, src/Glass.py and
        |                                                          src/Fridge.py
        |
        |   - src/Drink.py                - Line 5              - This is an parent class that contains
        |                                                         behaviours and attributes common to 
        |                                                         src/Alcoholic.py and src/NonAlcoholic.py
        |
  ------------------------------------------------------------------------------------------------------------------------
    2   |   OO Showcase - src/Glass.py
        |
        |    Exception Handling + Encapsulation (ish)
        |     
        |   - Lines 55 - 64,      - Exception handling implemented in parsing to handle wrong mock file input while hiding
        |           33 - 48,        information about what went wrong and dealing with it at the source rather than
        |                           letting it propagate up the call stack. The data file used (cocktail.csv) is missing
        |                           fields and information and parsing it like a normal csv file doesn't work. A function
        |                           was written (parse_row) to take each csv row of fields and attempt to extract the
        |                           information. Originally this was done field by field (try catch for each
        |                           field), but thought it was a lot of duplicate code, so it was made into a function
        |                           that could handle it more modular way.
        |
        |    Facade Design Pattern (Entire File)
        |    - This class is very similar in its design to a typical Facade Design pattern in that the Glass class is
        |      a unified interface that uses sub-systems, in this case the Cocktail class and the DrinkStorage class, to
        |      provide meaningful information to other interfaces. The Glass class has a collection of Cocktails
        |      and a collection of drinks which are used in the find_cocktail method (line 78) to generate meaningful
        |      information to the controller as well as the view. In the future this can be extended to provide meaningful
        |    - Worded differently, the Glass class offers its clients (the controller, view, or future models) a single,
        |      simple interface to the Glass subsystem (Cocktails and Drinks) by gluing together the classes that implement
        |      the parsing and processing of user information (what they want to drink) without completely hiding them.
        |      This provides meaningful data from a simple interface rather than from complex subsystems that will only
        |      get more complex as they evolve. The facade provides a simple default view of the subsystems that is good
        |      enough for most functionality, where only controllers that need more customizability will look beyond.
        |      Benefits:
        |      - Shields controller from subsystem components reducing the number of models the controller deals with
        |        and makes the subsystem easier to use.
        |      - Reduces coupling between controller and subsystem which allows for varying the components of the subsystem
        |        without affecting the controller using the facade.
        |      - Important to note that it doesnt prevent the controller from using the subsystem classes if it wants but
        |        allows for choice between ease of use and generality.
        |
---------------------------------------------------------------------------------------------------------------------
    3   |   Rest/SOAP compare contrast
        |
        |   In OOP there are 3 core questions we ask, Why we do it? How we do it? and What tools do we use.
        |   Why - For code reuse and maintainability
        |   How - Encapsulation/Information hiding, Cohesion, Coupling, Modularity, Error Handling, etc.
        |   Tools - Inheritance, Composition.
        |
        |   When it comes to REST vs. SOAP each have their advantages and disadvantages to achieving our Why.
        |
        |   REST API platforms are built to be used and reused in a flexible manner this is what makes them loosely coupled.
        |   On the other hand SOAP API platforms are built between a client and server, requiring the use of
        |   standard SOAP libraries, XML payloads, and adherence to the SOAP standards. This makes it highly-coupled
        |   because once a service is defined any changes to it could affect the client and server very heavily.
        |    
        |
        |   In REST, The constraint of generality of interface forces developers to build services with high cohesion and low coupling
        |   which favors extensibility and evolvability.
        |    
        |   For example, the LCBO API I use in src/Inventory.py Lines 139-153 is flexible in that it can take
        |   any number of parameters in the resource request to customize my queries. This way I can search
        |   for pages of information or even provide queries for specific words I'm looking for in products.
        |   Also, if the API itself were to change it is very unlikely that my implementation would be affected unless
        |   the resource name changed (if returns were updated, or the request requirements were updated).
        |
        |   In SOAP, Cohesion of services (as seen in the SOAP-style design) is often low as software development
        |   kits are often misused to convert existing software components into services. 
        |   Low cohesion leads to tight coupling and hence to limited extensibility and evolvability
        |
        |   To drive my point home, in my SOAP API, at src/Translate.py Lines 104-113, 117-129, the calls I make
        |   to the Microsoft Translator API service is highly dependent on the service requirements, and any changes
        |   made to the API would break my implementation. This is why you'll notice my call uses /v2/ in the
        |   request. The API had to create multiple versions in order to make any changes because if they changed
        |   the API, anyone who uses the API would have to change their implementation. The current version for
        |   Microsoft Translator is v3, but v2 was the most compatible with my use case. Also the parameters I
        |   pass to the API are extremely specific and there was no room for interpretation here.
        |
        |   On the other hand, in SOAP there is a layer of standards and error handling that helps with Encapsulation
        |   that just doesn't exist in REST. By letting SOAP handle errors we hide information and deal with the error
        |   where it happens rather than letting it spill down the call stack. This makes the design of the API 
        |   more maintainable and helps in the design of OOP. 
        |
        |   In src/PyDrinkController.py Line 433, you'll notice the call to translate text with the SOAP API is 
        |   surrounded by try catch blocks since the error handling done with SOAP can cause my application to
        |   crash if I don't handle the error that is returned properly. This for me was a good thing because it
        |   forced me to handle the cases where text couldn't be translated instead of trying to figure out
        |   if the return was successful or not like I would do in REST.
        |
        |   REST is also more modular in that there can be many CRUD (CREATE, RETRIEVE, UPDATE, DELETE) operations
        |   performed on the same resource or endpoint allowing for code reuse.
        |
        |   In the end of the day, there is an argument that can be made for either as they both have their advantages
        |   and disadvantages when it comes to designing OOP applications and these should be heavily considered
        |   on a case by case basis depending on what your application needs to perform.
        |
        |   Sources:
        |   https://nordicapis.com/rest-vs-soap-nordic-apis-infographic-comparison/?fbclid=IwAR33VFaDALsAV7ftTIW2yxjZZIB0BpyRJK61DHSkKCp5YSPZA4ChmMBJRF4
        |   Myself
        |   Professor Judi McCuaig
        |   
------------------------------------------------------------------------------------------------------------------------

##Sources:##
- https://krzysztofzuraw.com/blog/2016/makefiles-in-python-projects.html
- http://net-informations.com/python/iq/interfaces.htm
- http://page.sourceforge.net/
- http://code.activestate.com/recipes/580773-tkinter-search-box/



##Clarifications Based on Peer Review##
R: The distinction between cocktail and drink is a bit fuzzy. I get that a cocktail has a drink and a glass. However, if I ever had to use your code and just had a look at the class names. I would assume cocktail is a drink.
A: A Cocktail is made up of many drinks. While there is no list of drinks in my cocktail class, it has categories of drinks that must be satisfied. A Glass is where you make your cocktail. You add drinks to your glass in order to
   make the cocktail.
   
R: For some reason, the glass tab does not show any of the drinks selected.
A: To add selected drinks to the glass tab, please select a drink in the fridge with a left click, and right click it afterwards to add it to your Glass.
   This was done so that the user has a distinction between selecting a drink in the fridge (to see its description) and  adding the drink to their glass (by right clicking a selected drink) for making a cocktail. 
   
R: The persistence makes sense, but for some reason, after removing the clamato, orange juice and tonic from my fridge, they reappear every time I open the program.
A: Yes great observation! Since my app is using mock data for the non alcoholic beverages, I am loading in the information when the application starts up. Hence removing a non alcoholic beverage
   from the fridge during runtime affects only the currently running application. If you would like to remove a non alcoholic beverage all together, feel free to update the mock data located at
   data/mock/nonalcoholic.csv